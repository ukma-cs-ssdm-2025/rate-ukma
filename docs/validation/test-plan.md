# Rate UKMA Test Plan

## General Information

**Version:** 1.0  
**Date:** 27.10.2025  
**Status:** Accepted

This document describes the testing plan for the Rate UKMA system according to the requirements defined in [requirements.md](../requirements/requirements.md) and the testing strategy described in [testing-strategy.md](../testing/testing-strategy.md).

## Test Cases Description

| №  | Component / Function                      | Test Level  | Test Case                                                     | Type     | Requirement                                                                                                | Expected Result                                                                                                                                                                   | Path |
|----|-------------------------------------------|-------------|---------------------------------------------------------------|----------|------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------|
| 1  | Authentication (corporate login)          | e2e         | Student tries to authenticate                                 | Positive | [FR-001](../requirements/requirements.md#fr-001)                                                           | Playwright: when pressed on “Увійти”, student gets redirected to Microsoft auth.                                                                                                  |      |
| 2  | Authentication (corporate login)          | e2e         | Valid corporate credentials authenticate and redirect to home | Positive | [FR-001](../requirements/requirements.md#fr-001), [NFR-S-001](../requirements/requirements.md#nfr-s-001)   | Playwright: Clicking “Увійти” opens Microsoft login; after valid credentials and redirect, the app renders [data-testid="home"] within 2 s; Secure + HttpOnly session cookie set. |      |
| 3  | Authentication (invalid credentials)      | e2e         | Invalid Microsoft account credentials show error              | Negative | [FR-001](../requirements/requirements.md#fr-001), [NFR-U-001](../requirements/requirements.md#nfr-u-001)   | Playwright: Simulate IdP error (error=access_denied); user stays on login page, alert “Invalid credentials”, no session cookie created.                                           |      |
| 4  | Auth backend: corporate domain validation | unit        | Non-corporate domain is rejected                              | Negative | [FR-001](../requirements/requirements.md#fr-001), [NFR-S-001](../requirements/requirements.md#nfr-s-001)   | pytest: `_is_allowed_to_login()` raises `ImmediateHttpResponse` on different domain, `@ukma.edu.ua` passes.                                                                       |      |
| 5  | Auth session timeout                      | integration | Session expires after inactivity                              | Positive | [NFR-S-003](../requirements/requirements.md#nfr-s-003)                                                     | pytest-django: after 30 min idle, next call returns 401; Playwright: UI redirects to `/login`.                                                                                    |      |
| 6  | Courses list (catalog)                    | e2e         | Shows list with names                                         | Positive | [FR-002](../requirements/requirements.md#fr-002), [NFR-U-002](../requirements/requirements.md#nfr-u-002)   | Playwright: Navigating to `/courses` renders ≥ 1 course cards with names; list count in DOM equals server results.length.                                                         |      |
| 7  | Courses list pagination                   | integration | Load more / scroll fetches additional courses                 | Positive | [FR-002](../requirements/requirements.md#fr-002)                                                           | Vitest + msw: requesting `page=2` returns new items; UI appends exactly `page_size` nodes; no duplicates.                                                                         |      |
| 8  | Courses list empty state                  | integration | Shows “No courses available” when none exist                  | Negative | [FR-002](../requirements/requirements.md#fr-002), [NFR-RB-001](../requirements/requirements.md#nfr-rb-001) | Vitest: with empty API, `[data-testid="empty-state"]` visible; list empty.                                                                                                        |      |
| 9  | Course details: metadata                  | integration | Displays name, professor, faculty, semester, credits          | Positive | [FR-003](../requirements/requirements.md#fr-003)                                                           | Vitest: all required fields render correctly from payload.                                                                                                                        |      |
| 10 | Course page: aggregated ratings           | e2e         | Shows averages, counts, reviews                               | Positive | [FR-008](../requirements/requirements.md#fr-008), [NFR-U-002](../requirements/requirements.md#nfr-u-002)   | Playwright: GET `/courses/{id}/ratings/` returns correct data; averages are rendered correctly.                                                                                   |      |
| 11 | Course page: not rated yet                | e2e         | Shows message when no ratings                                 | Negative | [FR-008](../requirements/requirements.md#fr-008), [NFR-RB-001](../requirements/requirements.md#nfr-rb-001) | Playwright: `{ratings_count:0}` → `[data-testid="no-ratings"]` visible; widgets disabled.                                                                                         |      |
| 12 | Search: partial match                     | e2e         | Partial name shows matching courses                           | Positive | [FR-004](../requirements/requirements.md#fr-004)                                                           | Playwright: typing "econo" triggers search; returned items’ titles include “econo”.                                                                                               |      |
| 13 | Search: no results                        | e2e         | Shows “No courses found”                                      | Negative | [FR-004](../requirements/requirements.md#fr-004), [NFR-RB-001](../requirements/requirements.md#nfr-rb-001) | Playwright: empty API → `[data-testid="no-results"]` visible; list empty.                                                                                                         |      |
| 14 | Search: clear input                       | integration | Clearing input restores full list                             | Positive | [FR-004](../requirements/requirements.md#fr-004)                                                           | Vitest: clearing search restores baseline list.                                                                                                                                   |      |
| 15 | Filters: single filter                           | e2e         | Single filter criterion returns correct matching courses	NFR-PE-004                              | Positive | [FR-005](../requirements/requirements.md#fr-005), [NFR-PE-004](../requirements/requirements.md#nfr-pe-004) | Playwright: applying any single filter (rating ≥ 4, specific instructor, faculty, etc.) returns only courses matching that criterion within 1.5 s; results match API response data.                                                                                                                                                                                        |      |
| 16 | Filters: combine filters                  | unit        | Items match all selected filters                              | Positive | [FR-005](../requirements/requirements.md#fr-005), [NFR-PE-004](../requirements/requirements.md#nfr-pe-004) | Vitest: multiple filters → intersection set only.                                                                                                                                 |      |
| 17 | Filters: no results state                 | e2e         | Shows “No courses match your filters”                         | Negative | [FR-005](../requirements/requirements.md#fr-005), [NFR-RB-001](../requirements/requirements.md#nfr-rb-001) | Playwright: empty filtered list → `[data-testid="filters-empty-state"]`; clearing restores items.                                                                                 |      |
| 18 | Submit rating: required fields            | e2e         | Difficulty & usefulness (1–5) saved                           | Positive | [FR-006](../requirements/requirements.md#fr-006), [NFR-R-001](../requirements/requirements.md#nfr-r-001)   | Playwright + pytest: POST returns 201; DB row created; summary updates.                                                                                                           |      |
| 19 | Submit rating: validation                 | unit        | Missing / invalid fields block submission                     | Negative | [FR-006](../requirements/requirements.md#fr-006)                                                           | pytest: missing field → 400; out-of-range rejected.                                                                                                                               |      |
| 20 | Ratings anonymity                         | integration | Responses contain no PII                                      | Positive | [FR-006](../requirements/requirements.md#fr-006), [NFR-S-002](../requirements/requirements.md#nfr-s-002)   | pytest: API omits user identifiers; Playwright: UI shows anonymized data.                                                                                                         |      |
| 21 | Edit own feedback                         | e2e         | Student can edit prior feedback                               | Positive | [FR-007](../requirements/requirements.md#fr-007)                                                           | Playwright + pytest: PATCH owner → 200; non-owner → 403; UI reflects update.                                                                                                      |      |
| 22  | Profile: total evaluated                  | integration    | Total count visible on profile                                | Positive | [FR-011](../requirements/requirements.md#fr-011)                                                           | pytest: `/students/me/evaluations` total_rated` = DB count; UI matches.                                                                                                           |      |
| 23  | Performance: page load                    | e2e            | Courses page loads ≤ 1.5 s                                    | Positive | [NFR-PE-001](../requirements/requirements.md#nfr-pe-001)                                                   | Playwright: `DOMContentLoaded` ≤ 1.5 s under Fast 3G profile.                                                                                                                     |      |
| 24  | Performance: search latency               | integration | Results update ≤ 1 s                                          | Positive | [NFR-PE-002](../requirements/requirements.md#nfr-pe-002)                                                   | Playwright: keystroke → DOM update ≤ 1000 ms (p95).                                                                                                                               |      |
| 25 | Reliability: auto-retry                   | integration | Retries ≤ 3 times on failure                                  | Positive | [NFR-R-003](../requirements/requirements.md#nfr-r-003)                                                     | pytest / Playwright: transient 5xx → 3 retries with backoff; success → 201; failure → error banner.                                                                               |      |
| 26 | Reliability: backups restore              | integration | Ratings / comments present after restore                      | Positive | [NFR-R-004](../requirements/requirements.md#nfr-r-004)                                                     | pytest: after backup→restore, counts and checksums match pre-state; API identical.                                                                                                |      |
| 27 | Scatter plot (catalog/home)               | e2e            | Points render & are interactive                               | Positive | [FR-009](../requirements/requirements.md#fr-009)                                                           | Playwright: navigating to page renders a point per course; hover shows course title & (usefulness,difficulty); clicking a point navigates to that course page.                    |      |
| 28 | Scatter plot performance                  | e2e            | Renders ≤ 2 s for 500 items                                   | Positive | [NFR-PE-003](../requirements/requirements.md#nfr-pe-003)                                                   | Playwright (Chromium CDP throttling off; seeded 500 courses): from first paint to all SVG/canvas points present ≤ 2000 ms (p95 over 20 runs).                                     |      |
| 29 | Recommendations (course page)             | integration | Recommendations appear & link                                 | Positive | [FR-010](../requirements/requirements.md#fr-010)                                                           | Vitest + msw: `/api/v1/courses/{id}/recommendations` returns 3+ items; UI shows cards with titles & links; clicking navigates correctly.                                          |      |
| 30 | Recommendations (home)                    | e2e            | Personalized block visible                                    | Positive | [FR-010](../requirements/requirements.md#fr-010)                                                           | Playwright: logged-in user sees “Recommended for you” with ≥ 3 items; items differ after rating a course (signal personalization).                                                |      |
| 31 | Recommendations empty state               | integration    | Graceful when none                                            | Negative | [FR-010](../requirements/requirements.md#fr-010), [NFR-RB-001](../requirements/requirements.md#nfr-rb-001)     | Vitest + msw: empty recommendations → show “[data-testid='rec-empty']”; no stale items.                                                                                           |      |
| 32 | Admin statistics API                      | integration    | Aggregates & filters                                          | Positive | [FR-012](../requirements/requirements.md#fr-012)                                                           | pytest: `/api/v1/admin/stats?from=...&to=...` returns counts by day, faculty, course; values match seeded DB.                                                                     |      |
| 33 | Admin trends UI                           | e2e            | Chart renders & filters apply                                 | Positive | [FR-012](../requirements/requirements.md#fr-012)                                                           | Playwright: changing date range updates chart & table; totals match API.                                                                                                          |      |
| 34 | Uptime monitoring                         | ops/monitoring | Monthly uptime ≥ 99.5%                                        | Positive | [NFR-R-002](../requirements/requirements.md#nfr-r-002)                                                   | Synthetic monitor (e.g., GitHub Action + external ping): SLO report for month shows uptime ≥ 99.5%; outages documented.                                                           |      |
