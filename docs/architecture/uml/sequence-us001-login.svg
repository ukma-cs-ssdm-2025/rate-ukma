<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="890px" preserveAspectRatio="none" style="width:1009px;height:890px;background:#FFFFFF;" version="1.1" viewBox="0 0 1009 890" width="1009px" zoomAndPan="magnify"><title>[US-001] Login with Corporate Email</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="288.668" x="361.554" y="27.9951">[US-001] Login with Corporate Email</text><rect fill="none" height="569.3281" style="stroke:#000000;stroke-width:1.5;" width="992.7759" x="10" y="222.9922"/><g><title>Student</title><rect fill="#000000" fill-opacity="0.00000" height="690.7266" width="8" x="46.5557" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="50" x2="50" y1="118.5938" y2="809.3203"/></g><g><title>WebApp .React SPA.</title><rect fill="#000000" fill-opacity="0.00000" height="690.7266" width="8" x="324.8682" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="328.103" x2="328.103" y1="118.5938" y2="809.3203"/></g><g><title>Auth Middleware .Django.</title><rect fill="#000000" fill-opacity="0.00000" height="690.7266" width="8" x="563.9839" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="567.5566" x2="567.5566" y1="118.5938" y2="809.3203"/></g><g><title>Microsoft OIDC Provider</title><rect fill="#000000" fill-opacity="0.00000" height="690.7266" width="8" x="801.4912" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="804.9595" x2="804.9595" y1="118.5938" y2="809.3203"/></g><g><title>PostgreSQL</title><rect fill="#000000" fill-opacity="0.00000" height="690.7266" width="8" x="945.3994" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="949.0229" x2="949.0229" y1="118.5938" y2="809.3203"/></g><g class="participant participant-head" data-participant="Student"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.1113" x="20" y="115.292">Student</text><ellipse cx="50.5557" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M50.5557,58.7969 L50.5557,85.7969 M37.5557,66.7969 L63.5557,66.7969 M50.5557,85.7969 L37.5557,100.7969 M50.5557,85.7969 L63.5557,100.7969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="Student"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.1113" x="20" y="821.3154">Student</text><ellipse cx="50.5557" cy="833.1172" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M50.5557,841.1172 L50.5557,868.1172 M37.5557,849.1172 L63.5557,849.1172 M50.5557,868.1172 L37.5557,883.1172 M50.5557,868.1172 L63.5557,883.1172" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="WebApp"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="159.5303" x="249.103" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145.5303" x="256.103" y="107.292">WebApp (React SPA)</text></g><g class="participant participant-tail" data-participant="WebApp"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="159.5303" x="249.103" y="808.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145.5303" x="256.103" y="828.3154">WebApp (React SPA)</text></g><g class="participant participant-head" data-participant="Auth"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="196.8545" x="469.5566" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182.8545" x="476.5566" y="107.292">Auth Middleware (Django)</text></g><g class="participant participant-tail" data-participant="Auth"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="196.8545" x="469.5566" y="808.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182.8545" x="476.5566" y="828.3154">Auth Middleware (Django)</text></g><g class="participant participant-head" data-participant="OIDC"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="181.0635" x="714.9595" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.0635" x="721.9595" y="107.292">Microsoft OIDC Provider</text></g><g class="participant participant-tail" data-participant="OIDC"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="181.0635" x="714.9595" y="808.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.0635" x="721.9595" y="828.3154">Microsoft OIDC Provider</text></g><g class="participant participant-head" data-participant="DB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.7529" x="906.0229" y="115.292">PostgreSQL</text><path d="M931.3994,66.2969 C931.3994,56.2969 949.3994,56.2969 949.3994,56.2969 C949.3994,56.2969 967.3994,56.2969 967.3994,66.2969 L967.3994,92.2969 C967.3994,102.2969 949.3994,102.2969 949.3994,102.2969 C949.3994,102.2969 931.3994,102.2969 931.3994,92.2969 L931.3994,66.2969" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M931.3994,66.2969 C931.3994,76.2969 949.3994,76.2969 949.3994,76.2969 C949.3994,76.2969 967.3994,76.2969 967.3994,66.2969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="DB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.7529" x="906.0229" y="821.3154">PostgreSQL</text><path d="M931.3994,834.6172 C931.3994,824.6172 949.3994,824.6172 949.3994,824.6172 C949.3994,824.6172 967.3994,824.6172 967.3994,834.6172 L967.3994,860.6172 C967.3994,870.6172 949.3994,870.6172 949.3994,870.6172 C949.3994,870.6172 931.3994,870.6172 931.3994,860.6172 L931.3994,834.6172" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M931.3994,834.6172 C931.3994,844.6172 949.3994,844.6172 949.3994,844.6172 C949.3994,844.6172 967.3994,844.6172 967.3994,834.6172" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="message" data-participant-1="Student" data-participant-2="WebApp"><polygon fill="#181818" points="316.8682,145.7266,326.8682,149.7266,316.8682,153.7266,320.8682,149.7266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="50.5557" x2="322.8682" y1="149.7266" y2="149.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157.2632" x="57.5557" y="144.6606">Request protected page</text></g><g class="message" data-participant-1="WebApp" data-participant-2="Auth"><polygon fill="#181818" points="555.9839,174.8594,565.9839,178.8594,555.9839,182.8594,559.9839,178.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="328.8682" x2="561.9839" y1="178.8594" y2="178.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215.1157" x="335.8682" y="173.7935">Validate session (cookie + CSRF)</text></g><g class="message" data-participant-1="Auth" data-participant-2="DB"><polygon fill="#181818" points="937.3994,203.9922,947.3994,207.9922,937.3994,211.9922,941.3994,207.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="567.9839" x2="943.3994" y1="207.9922" y2="207.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.417" x="574.9839" y="202.9263">Check session record</text></g><path d="M10,222.9922 L74.4429,222.9922 L74.4429,230.125 L64.4429,240.125 L10,240.125 L10,222.9922" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="569.3281" style="stroke:#000000;stroke-width:1.5;" width="992.7759" x="10" y="222.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="25" y="236.0591">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="91.5288" x="89.4429" y="235.2026">[Session valid]</text><g class="message" data-participant-1="DB" data-participant-2="Auth"><polygon fill="#181818" points="578.9839,257.2578,568.9839,261.2578,578.9839,265.2578,574.9839,261.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="572.9839" x2="948.3994" y1="261.2578" y2="261.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.9937" x="584.9839" y="256.1919">Session found</text></g><g class="message" data-participant-1="Auth" data-participant-2="WebApp"><polygon fill="#181818" points="339.8682,286.3906,329.8682,290.3906,339.8682,294.3906,335.8682,290.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="333.8682" x2="566.9839" y1="290.3906" y2="290.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.4697" x="345.8682" y="285.3247">OK (user authenticated)</text></g><g class="message" data-participant-1="WebApp" data-participant-2="Student"><polygon fill="#181818" points="61.5557,315.5234,51.5557,319.5234,61.5557,323.5234,57.5557,319.5234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="55.5557" x2="327.8682" y1="319.5234" y2="319.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125.5757" x="67.5557" y="314.4575">Render Home Page</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="1002.7759" y1="328.5234" y2="328.5234"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="167.9595" x="15" y="338.7339">[Session missing / expired]</text><g class="message" data-participant-1="DB" data-participant-2="Auth"><polygon fill="#181818" points="578.9839,359.4609,568.9839,363.4609,578.9839,367.4609,574.9839,363.4609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="572.9839" x2="948.3994" y1="363.4609" y2="363.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.416" x="584.9839" y="358.395">Session not found</text></g><g class="message" data-participant-1="Auth" data-participant-2="WebApp"><polygon fill="#181818" points="339.8682,388.5938,329.8682,392.5938,339.8682,396.5938,335.8682,392.5938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="333.8682" x2="566.9839" y1="392.5938" y2="392.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86.2773" x="345.8682" y="387.5278">Require login</text></g><g class="message" data-participant-1="WebApp" data-participant-2="Student"><polygon fill="#181818" points="61.5557,417.7266,51.5557,421.7266,61.5557,425.7266,57.5557,421.7266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="55.5557" x2="327.8682" y1="421.7266" y2="421.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="254.3125" x="67.5557" y="416.6606">Show Login Page (with Outlook button)</text></g><g class="message" data-participant-1="Student" data-participant-2="WebApp"><polygon fill="#181818" points="316.8682,446.8594,326.8682,450.8594,316.8682,454.8594,320.8682,450.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="50.5557" x2="322.8682" y1="450.8594" y2="450.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.8286" x="57.5557" y="445.7935">Click "Login with Outlook"</text></g><g class="message" data-participant-1="WebApp" data-participant-2="OIDC"><polygon fill="#181818" points="793.4912,475.9922,803.4912,479.9922,793.4912,483.9922,797.4912,479.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="328.8682" x2="799.4912" y1="479.9922" y2="479.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171.2725" x="335.8682" y="474.9263">Redirect to Microsoft login</text></g><g class="message" data-participant-1="Student" data-participant-2="OIDC"><polygon fill="#181818" points="793.4912,505.125,803.4912,509.125,793.4912,513.125,797.4912,509.125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="50.5557" x2="799.4912" y1="509.125" y2="509.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155.2256" x="57.5557" y="504.0591">Enter email &amp; password</text></g><g class="message" data-participant-1="OIDC" data-participant-2="WebApp"><polygon fill="#181818" points="339.8682,534.2578,329.8682,538.2578,339.8682,542.2578,335.8682,538.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="333.8682" x2="804.4912" y1="538.2578" y2="538.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193.2354" x="345.8682" y="533.1919">Redirect back with Auth Code</text></g><g class="message" data-participant-1="WebApp" data-participant-2="Auth"><polygon fill="#181818" points="555.9839,563.3906,565.9839,567.3906,555.9839,571.3906,559.9839,567.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="328.8682" x2="561.9839" y1="567.3906" y2="567.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.7554" x="335.8682" y="562.3247">Send Auth Code</text></g><g class="message" data-participant-1="Auth" data-participant-2="OIDC"><polygon fill="#181818" points="793.4912,592.5234,803.4912,596.5234,793.4912,600.5234,797.4912,596.5234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="567.9839" x2="799.4912" y1="596.5234" y2="596.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.9619" x="574.9839" y="591.4575">Exchange code for tokens</text></g><g class="message" data-participant-1="OIDC" data-participant-2="Auth"><polygon fill="#181818" points="578.9839,621.6563,568.9839,625.6563,578.9839,629.6563,574.9839,625.6563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="572.9839" x2="804.4912" y1="625.6563" y2="625.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.3184" x="584.9839" y="620.5903">ID Token + Access Token</text></g><g class="message" data-participant-1="Auth" data-participant-2="Auth"><line style="stroke:#181818;stroke-width:1;" x1="567.9839" x2="609.9839" y1="654.7891" y2="654.7891"/><line style="stroke:#181818;stroke-width:1;" x1="609.9839" x2="609.9839" y1="654.7891" y2="667.7891"/><line style="stroke:#181818;stroke-width:1;" x1="568.9839" x2="609.9839" y1="667.7891" y2="667.7891"/><polygon fill="#181818" points="578.9839,663.7891,568.9839,667.7891,578.9839,671.7891,574.9839,667.7891" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223.5073" x="574.9839" y="649.7231">Validate ID Token, extract identity</text></g><g class="message" data-participant-1="Auth" data-participant-2="DB"><polygon fill="#181818" points="937.3994,692.9219,947.3994,696.9219,937.3994,700.9219,941.3994,696.9219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="567.9839" x2="943.3994" y1="696.9219" y2="696.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.7373" x="574.9839" y="691.856">Create new session</text></g><g class="message" data-participant-1="DB" data-participant-2="Auth"><polygon fill="#181818" points="578.9839,722.0547,568.9839,726.0547,578.9839,730.0547,574.9839,726.0547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="572.9839" x2="948.3994" y1="726.0547" y2="726.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18.7573" x="584.9839" y="720.9888">OK</text></g><g class="message" data-participant-1="Auth" data-participant-2="WebApp"><polygon fill="#181818" points="339.8682,751.1875,329.8682,755.1875,339.8682,759.1875,335.8682,755.1875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="333.8682" x2="566.9839" y1="755.1875" y2="755.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197.4185" x="345.8682" y="750.1216">Set-Cookie (sessionid) + CSRF</text></g><g class="message" data-participant-1="WebApp" data-participant-2="Student"><polygon fill="#181818" points="61.5557,780.3203,51.5557,784.3203,61.5557,788.3203,57.5557,784.3203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="55.5557" x2="327.8682" y1="784.3203" y2="784.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150.376" x="67.5557" y="779.2544">Redirect to Home Page</text></g><!--SRC=[VLFBRjim4BppAnO-518Qe-arXm2EbA914jYr-ZWKET3ancOjaogvYjE_xrAYOZcDUnB4cLtEpWx9K8tmyrirFJ__-01tRcqix0rje72-SLuImlLEcbe8gSXvgAZLQ4aqqfDHff6MOF83LxEcWMo9J89gCSid80FqnyVKMSkzxutMDUwbHyZANzAkNLyGmMFwlL7U1VT8CByf2rXuzsGq-euTJuIM95So84mMBj3QO_NbhaFBAo6IM9XU9Yrm0KlytM8WQBmZL8GQ6hb6aN1cTWeluBkiZOxZ1mp1E0kPScvh4Dv3KIq_vQBZCR-yOdQnGRLzeNfKpcksh6OtqjbJx2SWqgU7MmRqqRKsedtJiTxvBMHjG0-I8Hx6A1QbS-OEafaz31h7i-mFV7OxX4KSJ63DxWptx0n_xHe-03utnkDfHTRHVrH55xaSwXYOKrggZTkdI4Kfa7N1chTKivEmQecSpGLNlxMdeZRiw6IKo5Gu6LrtsSSYwj4iXyD73WwP6TID-YV-jILs2MEouHqd88Hzt1Zq-AjHK-kLP46TaiwFmcayal9YeDL7Z24emzNFQiEHHr0CiyMUDM_HXl7bgTLD2LyZnfcRASMBwN_5gEdhj0ubPxnWyl4vcZYweJ-ZeZwo7cE1nVsGst-oCBzzS_aLqhJe7qEMIetEqyCu7Sp3XWxfPA_-0W00]--></g></svg>